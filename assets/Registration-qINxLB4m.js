import{g as $,a as y,d as R,e as A,r as t,j as e}from"./index-BT2NFm00.js";import{g as q,s as U,e as I}from"./index.esm2017-DKHk_Qxc.js";import{j as M,k as V,l as W,m as L}from"./index-DmkmB9sN.js";import"./iconBase-DtSaPzl4.js";const D=$(y),T=q(y),Y=a=>{switch(a){case"auth/email-already-in-use":return"This email is already registered.";case"auth/invalid-email":return"Invalid email format.";case"auth/weak-password":return"Password should be at least 6 characters.";case"auth/user-not-found":return"No user found with this email.";case"auth/wrong-password":return"Incorrect password.";default:return"An error occurred. Please try again."}},Z=async(a,h,l,x)=>{try{const i=(await R(D,a,h)).user;return await U(I(T,"users",i.uid),{username:l,phone:x,email:a}),await A(i),{success:!0,message:"User registered successfully. Please verify your email."}}catch(o){return console.error("Error registering user:",o),{success:!1,message:Y(o.code)}}},J=()=>{const[a,h]=t.useState(""),[l,x]=t.useState(""),[o,i]=t.useState(""),[f,w]=t.useState(""),[p,j]=t.useState(""),[c,N]=t.useState(!1),[u,m]=t.useState(""),[r,n]=t.useState(!1),[b,d]=t.useState(null),[v,P]=t.useState(!1),S=()=>N(!c),C=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(s).toLowerCase()),E=s=>/^[0-9]{10}$/.test(s),k=s=>{w(s),s.length<6?m("Weak"):s.length>=6&&/\d/.test(s)&&/[A-Z]/.test(s)&&/[@$!%*?&#]/.test(s)?m("Strong"):s.length>=6&&/\d/.test(s)?m("Moderate"):m("Weak")},F=async s=>{if(s.preventDefault(),n(!0),d(null),!C(o)){d("Invalid email address"),n(!1);return}if(!E(l)){d("Invalid phone number"),n(!1);return}if(f!==p){d("Passwords do not match"),n(!1);return}const g=await Z({username:a,email:o,phone:l,password:f});g.success?(P(!0),n(!1),setTimeout(()=>{window.location.href="/login"},2e3)):(d(g.message||"Registration failed."),n(!1))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-red-400 via-gray-300 to-gray-400",children:e.jsxs("div",{className:"bg-white p-10 rounded-lg shadow-xl w-full max-w-md",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-black",children:"Create Your Account"}),b&&e.jsxs("div",{className:"text-red-600 bg-red-100 p-3 rounded mb-4 flex items-center transition-all duration-300 ease-in-out",children:[e.jsx(M,{className:"mr-2"})," ",b]}),v&&e.jsxs("div",{className:"text-green-600 bg-green-100 p-3 rounded mb-4 flex items-center transition-all duration-300 ease-in-out",children:[e.jsx(V,{className:"mr-2"})," Registration successful! Redirecting to login..."]}),e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"username",className:"block mb-2 text-sm font-medium text-gray-600",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:a,onChange:s=>h(s.target.value),placeholder:"Enter your username",required:!0,disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${r?"opacity-50":""}`})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-600",children:"Phone"}),e.jsx("input",{id:"phone",type:"tel",value:l,onChange:s=>x(s.target.value),placeholder:"Enter your phone number",required:!0,disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${r?"opacity-50":""}`})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-600",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:o,onChange:s=>i(s.target.value),placeholder:"Enter your email",required:!0,disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${r?"opacity-50":""}`})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-600",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:c?"text":"password",value:f,onChange:s=>k(s.target.value),placeholder:"Enter your password",required:!0,disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${r?"opacity-50":""}`}),e.jsx("button",{type:"button",onClick:S,className:"absolute right-2 top-2 text-gray-500",children:c?e.jsx(W,{}):e.jsx(L,{})})]}),e.jsx("p",{className:`mt-1 text-sm ${u==="Weak"?"text-red-500":u==="Moderate"?"text-yellow-500":"text-green-500"}`,children:u&&`Password Strength: ${u}`})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"confirm-password",className:"block mb-2 text-sm font-medium text-gray-600",children:"Confirm Password"}),e.jsx("input",{id:"confirm-password",type:c?"text":"password",value:p,onChange:s=>j(s.target.value),placeholder:"Confirm your password",required:!0,disabled:r,className:`w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 ${r?"opacity-50":""}`})]}),e.jsx("button",{type:"submit",disabled:r,className:`w-full bg-red-600 text-white py-3 rounded-lg font-semibold transition duration-300 ${r?"opacity-50 cursor-not-allowed":"hover:bg-red-700 hover:scale-105"}`,children:r?"Registering...":"Register"})]}),e.jsxs("p",{className:"mt-4 text-center text-sm text-gray-500",children:["Already have an account? ",e.jsx("a",{href:"/login",className:"text-red-600 underline",children:"Log in"})]})]})})};export{J as default};
